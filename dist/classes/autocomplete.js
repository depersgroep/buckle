"use strict";function Autocomplete(t){var e,a,l=this;t&&(this.defaults={input:t.input?t.input:null,appendTo:t.appendTo?t.appendTo:null,form:t.form?t.form:null,button:t.button?t.button:null,itemElement:t.itemElement?t.itemElement:document.createElement("li"),activeClass:t.active?t.activeClass:"js-is-active",minLength:t.minLength?t.minLength:3,url:t.url?t.url:null},this.defaults.input&&this.defaults.appendTo&&(e=$(this.defaults.input),a=$(this.defaults.appendTo),this.defaults.form||(this.defaults.form=e.closest("form")[0]),s()));function s(){e.attr("autocomplete","off"),e.on("keyup.autocomplete",n.bind(l)),e.on("keydown.autocomplete",u.bind(l)),e.on("focus.autocomplete",n.bind(l)),e.on("blur.autocomplete",o),$(window).on("click.autocomplete",i.bind(l))}function n(t){40===t.keyCode?(c(),t.preventDefault()):38===t.keyCode?(p(),t.preventDefault()):13!==t.keyCode&&l.defaults.input.value.length>=l.defaults.minLength?d(l.defaults.input.value):(l.defaults.appendTo.innerHTML="",a.removeClass(l.defaults.activeClass))}function u(t){var e;13===t.keyCode&&(e=$("."+l.defaults.activeClass,l.defaults.appendTo),e.length&&r(e[0]))}function o(){window.setTimeout(m,150)}function i(t){l.defaults.input!==t.target&&m()}function d(t){$.ajax({url:l.defaults.url+t,method:"get",success:f.bind(l)})}function f(t){var e,s=t.items,n=0,u=s.length;for(u>0?a.addClass(l.defaults.activeClass):m(),l.defaults.appendTo.innerHTML="";u>n;n++)e=l.defaults.itemElement.cloneNode(!0),e.innerText=s[n],e.setAttribute("data-autocomplete-id",s[n]),$(e).on("click.autocomplete",r.bind(l)),l.defaults.appendTo.appendChild(e)}function c(){var t=$("li",l.defaults.appendTo),e=$("."+l.defaults.activeClass,l.defaults.appendTo),a=e.next();e.removeClass(l.defaults.activeClass),e.length&&a.length?a.length&&a.addClass(l.defaults.activeClass):t.first().addClass(l.defaults.activeClass)}function p(){var t=$("li",l.defaults.appendTo),e=$(".js-is-active",l.defaults.appendTo),a=e.previous();e.removeClass(l.defaults.activeClass),e.length&&a.length?a.addClass(l.defaults.activeClass):t.last().addClass(l.defaults.activeClass)}function r(t){var e=t.target?t.target:t;l.defaults.input.value=e.getAttribute("data-autocomplete-id"),l.defaults.button?l.defaults.button.click():window.setTimeout(function(){},0),m()}function m(){a.html("").removeClass(l.defaults.activeClass)}return console.log(this),this}Autocomplete.prototype.destory=function(){return this.defaults&&($(this.defaults.input).off("keyup.autocomplete keydown.autocomplete focus.autocomplete"),this.defaults=null),this};