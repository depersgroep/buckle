"use strict";function Autocomplete(e){var t,a,l=this;e&&(this.defaults={input:e.input?e.input:null,appendTo:e.appendTo?e.appendTo:null,url:e.url?e.url:null,onSelectCallback:e.onSelectCallback?e.onSelectCallback:function(){},itemElement:e.itemElement?e.itemElement:document.createElement("li"),activeClass:e.active?e.activeClass:"js-is-active",minLength:e.minLength?e.minLength:3,debounce:e.debounce?e.debounce:200},this.defaults.input&&this.defaults.appendTo&&(t=$(this.defaults.input),a=$(this.defaults.appendTo),n()));function n(){t.attr("autocomplete","off"),t.on("keyup.autocomplete",v(u,l.defaults.debounce)),t.on("keydown.autocomplete",s),t.on("focus.autocomplete",u),t.on("blur.autocomplete",o),$(window).on("click.autocomplete",i)}function u(e){var t=e.keyCode||e.which;(t<37||t>40)&&(13!==t&&l.defaults.input.value.length>=l.defaults.minLength?c(l.defaults.input.value):(l.defaults.appendTo.innerHTML="",a.removeClass(l.defaults.activeClass)))}function s(e){var t,a=e.keyCode||e.which;40===a?(e.preventDefault(),f()):38===a?(e.preventDefault(),p()):13===a&&(t=$("."+l.defaults.activeClass,l.defaults.appendTo),t.length>0&&r(t[0]))}function o(){window.setTimeout(m,400)}function i(e){l.defaults.input!==e.target&&m()}function c(e){$.ajax({url:l.defaults.url+e,method:"get",success:d})}function d(e){var t,n=e.items,u=0,s=n.length;for(s>0?a.addClass(l.defaults.activeClass):m(),l.defaults.appendTo.innerHTML="";u<s;u++)t=l.defaults.itemElement.cloneNode(!0),t.innerHTML=n[u],t.setAttribute("data-autocomplete-value",n[u]),$(t).on("click.autocomplete",r),l.defaults.appendTo.appendChild(t)}function f(){var e=$("li",l.defaults.appendTo),t=$("."+l.defaults.activeClass,l.defaults.appendTo),a=t.next();t.removeClass(l.defaults.activeClass),0===t.length||0===a.length?e.first().addClass(l.defaults.activeClass):a.length>0&&a.addClass(l.defaults.activeClass)}function p(){var e=$("li",l.defaults.appendTo),t=$(".js-is-active",l.defaults.appendTo),a=t.previous();t.removeClass(l.defaults.activeClass),0===t.length||0===a.length?e.last().addClass(l.defaults.activeClass):a.addClass(l.defaults.activeClass)}function r(e){var t=e.target?e.target:e;m(),"function"==typeof l.defaults.onSelectCallback&&l.defaults.onSelectCallback(t.getAttribute("data-autocomplete-value"))}function m(){a.html("").removeClass(l.defaults.activeClass)}function v(e,t,a){var l,n=function(){var n=this,u=arguments,s=function(){l=null,a||e.apply(n,u)},o=a&&!l;clearTimeout(l),l=setTimeout(s,t),o&&e.apply(n,u)};return n}return this}Autocomplete.prototype.destroy=function(){return this.defaults&&($(this.defaults.input).off("keyup.autocomplete keydown.autocomplete focus.autocomplete"),this.defaults=null),this};