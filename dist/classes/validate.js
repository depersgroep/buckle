"use strict";function Validate(e){if(e){var t,i=this;if(i.defaults={frm:!!e.frm&&e.frm,fields:[],noFormevents:!!e.noFormevents,i18n:{empty:"This field is required.",unchecked:"This field is required.",invalidEmail:"Please enter a valid email address.",invalidTelephone:"Please enter a valid telephone number."},customValidation:e.customValidation?e.customValidation:{},onError:e.onError?e.onError:function(){},onRemoveError:e.onRemoveError?e.onRemoveError:function(){},onValidationComplete:e.onValidationComplete?e.onValidationComplete:function(){}},e.i18n)for(t in e.i18n)i.defaults.i18n[t]=e.i18n[t];i.defaults.frm&&(i.defaults.frm.setAttribute("novalidate",""),$('input[required], textarea[required], select[required], input[data-validate="true"], textarea[data-validate="true"], select[data-validate="true"]',i.defaults.frm).each(function(){i.defaults.fields.push({hasError:!1,htmlObj:this})}),i.defaults.noFormevents||(bean.on(i.defaults.frm,"submit",function(e){i.isValid()?$('[type="submit"]',this).attr("disabled","disabled"):e.preventDefault()}),bean.on(i.defaults.frm,"reset",function(){i.removeAllErrors()})))}return this}Validate.prototype.checkValidation=function(){var e=!1,t=!1;function i(e){var t=e.lastIndexOf("/"),i=e.substring(1,t),s=e.substring(t+1);try{return new RegExp(i,s),{regex:i,flags:s}}catch(a){return{}}}if(this.defaults){for(var s in this.defaults.fields)if(this.defaults.fields[s]&&this.defaults.fields[s].htmlObj){if(this.removeError(s),t=!1,this.checkValue(this.defaults.fields[s].htmlObj)){var a,l,r,d,f;switch(this.defaults.fields[s].htmlObj.nodeName.toLowerCase()){case"textarea":d=this.defaults.fields[s].htmlObj.value,this.defaults.fields[s].htmlObj.getAttribute("data-regex")&&(a=i(this.defaults.fields[s].htmlObj.getAttribute("data-regex")),a.regex&&(l=new RegExp(a.regex,a.flags),l.test(d)||(this.triggerError(s,"invalid",!1),t=!0)));break;case"select":d=this.defaults.fields[s].htmlObj.options[this.defaults.fields[s].htmlObj.selectedIndex].value,d||(this.triggerError(s,"invalid",!1),t=!0);break;default:switch(this.defaults.fields[s].htmlObj.getAttribute("type")){case"checkbox":this.defaults.fields[s].htmlObj.checked?bean.off(this):(this.triggerError(s,"unchecked",!1),t=!0);break;case"radio":r=$('input[name="'+this.defaults.fields[s].htmlObj.name+'"]:checked'),(r.length<1||!r[0].value)&&(this.triggerError(s,"unchecked",!1),t=!0);break;case"tel":d=this.defaults.fields[s].htmlObj.value,/^(\+?\d+)(\/?[\s\.]?\d+)*$/.test(d)||(this.triggerError(s,"invalidTelephone",!1),t=!0);break;case"email":d=this.defaults.fields[s].htmlObj.value,/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(d)||(this.triggerError(s,"invalidEmail",!1),t=!0);break;default:d=this.defaults.fields[s].htmlObj.value,this.defaults.fields[s].htmlObj.getAttribute("data-regex")&&(a=i(this.defaults.fields[s].htmlObj.getAttribute("data-regex")),a.regex&&(l=new RegExp(a.regex,a.flags),l.test(d)||(this.triggerError(s,"invalid",!1),t=!0)))}}f=this.defaults.customValidation[this.defaults.fields[s].htmlObj.getAttribute("name")],!t&&f&&"function"==typeof f.rule&&(f.rule.call(this.defaults.fields[s].htmlObj,d)||(this.triggerError(s,f.message,!0),t=!0))}else this.defaults.fields[s].htmlObj.getAttribute("data-validate")||(this.triggerError(s,"empty",!1),t=!0);e||(e=t)}this.defaults.onValidationComplete.call(this,{error:e,validate:this,frm:this.defaults.frm})}return e},Validate.prototype.isValid=function(){return!this.checkValidation()},Validate.prototype.checkValue=function(e){var t=!1;return e&&e.value&&e.value!==e.getAttribute("placeholder")&&(e.getAttribute("minlength")?e.value.length>=parseInt(e.getAttribute("minlength"),10)&&(t=!0):t=!0),t},Validate.prototype.triggerError=function(e,t,i){var s;if((e||0===e)&&t){var a=this;if("number"!=typeof e&&!this.defaults.fields[e]){"string"==typeof e&&(e=$(e,a.defaults.frm));for(var l=0;l<this.defaults.fields.length;l++)if(e[0]===this.defaults.fields[l].htmlObj){e=l;break}}switch(this.defaults.fields[e].hasError=!0,a.defaults.fields[e].htmlObj.type){case"radio":case"checkbox":s="click.validate";break;case"select-one":case"select-multiple":s="change.validate";break;default:s="keyup.validate"}bean.off(a.defaults.fields[e].htmlObj,s),bean.on(a.defaults.fields[e].htmlObj,s,function(){a.isValid()}),this.defaults.onError.call(this,{field:this.defaults.fields[e].htmlObj,message:this.defaults.i18n[t]||"",custom:i})}return this},Validate.prototype.removeError=function(e){if(e){if("number"!=typeof e&&!this.defaults.fields[e]){"string"==typeof e&&(e=$(e,this.defaults.frm));for(var t=0;t<this.defaults.fields.length;t++)if(e[0]===this.defaults.fields[t].htmlObj){e=t;break}}this.defaults.onRemoveError.call(this,{field:this.defaults.fields[e].htmlObj})}return this},Validate.prototype.removeAllErrors=function(){for(var e in this.defaults.fields)this.defaults.fields[e]&&this.defaults.fields[e].htmlObj&&(bean.off(this.defaults.fields[e].htmlObj,"keyup.validate"),this.removeError(e))};