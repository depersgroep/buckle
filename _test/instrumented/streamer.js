"use strict";
var __cov_bjUWleXVsuRWnq2vXE6lXw = (Function('return this'))();
if (!__cov_bjUWleXVsuRWnq2vXE6lXw.__coverage__) { __cov_bjUWleXVsuRWnq2vXE6lXw.__coverage__ = {}; }
__cov_bjUWleXVsuRWnq2vXE6lXw = __cov_bjUWleXVsuRWnq2vXE6lXw.__coverage__;
if (!(__cov_bjUWleXVsuRWnq2vXE6lXw['/Users/joggink/Dropbox/www/clients/depersgroep/web-javascript-libraries/src/modules/streamer.js'])) {
   __cov_bjUWleXVsuRWnq2vXE6lXw['/Users/joggink/Dropbox/www/clients/depersgroep/web-javascript-libraries/src/modules/streamer.js'] = {"path":"/Users/joggink/Dropbox/www/clients/depersgroep/web-javascript-libraries/src/modules/streamer.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"Streamer","line":2,"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":23}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":35},"end":{"line":19,"column":45}}},"3":{"name":"(anonymous_3)","line":29,"loc":{"start":{"line":29,"column":45},"end":{"line":29,"column":55}}},"4":{"name":"(anonymous_4)","line":35,"loc":{"start":{"line":35,"column":31},"end":{"line":35,"column":41}}},"5":{"name":"(anonymous_5)","line":52,"loc":{"start":{"line":52,"column":27},"end":{"line":52,"column":37}}},"6":{"name":"(anonymous_6)","line":59,"loc":{"start":{"line":59,"column":11},"end":{"line":59,"column":25}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":17,"column":1}},"2":{"start":{"line":4,"column":1},"end":{"line":4,"column":18}},"3":{"start":{"line":6,"column":1},"end":{"line":14,"column":3}},"4":{"start":{"line":15,"column":1},"end":{"line":15,"column":23}},"5":{"start":{"line":19,"column":0},"end":{"line":33,"column":2}},"6":{"start":{"line":21,"column":1},"end":{"line":21,"column":18}},"7":{"start":{"line":23,"column":1},"end":{"line":23,"column":46}},"8":{"start":{"line":24,"column":1},"end":{"line":27,"column":4}},"9":{"start":{"line":29,"column":1},"end":{"line":31,"column":10}},"10":{"start":{"line":30,"column":2},"end":{"line":30,"column":20}},"11":{"start":{"line":35,"column":0},"end":{"line":50,"column":2}},"12":{"start":{"line":37,"column":1},"end":{"line":37,"column":18}},"13":{"start":{"line":39,"column":1},"end":{"line":48,"column":2}},"14":{"start":{"line":40,"column":2},"end":{"line":40,"column":25}},"15":{"start":{"line":41,"column":2},"end":{"line":44,"column":5}},"16":{"start":{"line":46,"column":2},"end":{"line":46,"column":48}},"17":{"start":{"line":47,"column":2},"end":{"line":47,"column":15}},"18":{"start":{"line":52,"column":0},"end":{"line":73,"column":2}},"19":{"start":{"line":54,"column":1},"end":{"line":54,"column":18}},"20":{"start":{"line":56,"column":1},"end":{"line":71,"column":4}},"21":{"start":{"line":60,"column":3},"end":{"line":68,"column":4}},"22":{"start":{"line":61,"column":4},"end":{"line":67,"column":5}},"23":{"start":{"line":62,"column":5},"end":{"line":65,"column":8}},"24":{"start":{"line":66,"column":5},"end":{"line":66,"column":47}},"25":{"start":{"line":69,"column":3},"end":{"line":69,"column":25}}},"branchMap":{"1":{"line":8,"type":"cond-expr","locations":[{"start":{"line":8,"column":23},"end":{"line":8,"column":31}},{"start":{"line":8,"column":34},"end":{"line":8,"column":38}}]},"2":{"line":9,"type":"cond-expr","locations":[{"start":{"line":9,"column":23},"end":{"line":9,"column":31}},{"start":{"line":9,"column":34},"end":{"line":9,"column":39}}]},"3":{"line":10,"type":"cond-expr","locations":[{"start":{"line":10,"column":27},"end":{"line":10,"column":39}},{"start":{"line":10,"column":42},"end":{"line":10,"column":46}}]},"4":{"line":11,"type":"cond-expr","locations":[{"start":{"line":11,"column":27},"end":{"line":11,"column":39}},{"start":{"line":11,"column":42},"end":{"line":11,"column":44}}]},"5":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},{"start":{"line":39,"column":1},"end":{"line":39,"column":1}}]},"6":{"line":60,"type":"if","locations":[{"start":{"line":60,"column":3},"end":{"line":60,"column":3}},{"start":{"line":60,"column":3},"end":{"line":60,"column":3}}]},"7":{"line":60,"type":"binary-expr","locations":[{"start":{"line":60,"column":7},"end":{"line":60,"column":20}},{"start":{"line":60,"column":24},"end":{"line":60,"column":38}}]},"8":{"line":61,"type":"if","locations":[{"start":{"line":61,"column":4},"end":{"line":61,"column":4}},{"start":{"line":61,"column":4},"end":{"line":61,"column":4}}]}}};
}
__cov_bjUWleXVsuRWnq2vXE6lXw = __cov_bjUWleXVsuRWnq2vXE6lXw['/Users/joggink/Dropbox/www/clients/depersgroep/web-javascript-libraries/src/modules/streamer.js'];
function Streamer(args){__cov_bjUWleXVsuRWnq2vXE6lXw.f['1']++;__cov_bjUWleXVsuRWnq2vXE6lXw.s['2']++;var _this=this;__cov_bjUWleXVsuRWnq2vXE6lXw.s['3']++;_this.defaults={timestamp:moment().unix(),htmlObj:args.obj?(__cov_bjUWleXVsuRWnq2vXE6lXw.b['1'][0]++,args.obj):(__cov_bjUWleXVsuRWnq2vXE6lXw.b['1'][1]++,null),pollURL:args.url?(__cov_bjUWleXVsuRWnq2vXE6lXw.b['2'][0]++,args.url):(__cov_bjUWleXVsuRWnq2vXE6lXw.b['2'][1]++,false),counter:args.counter?(__cov_bjUWleXVsuRWnq2vXE6lXw.b['3'][0]++,args.counter):(__cov_bjUWleXVsuRWnq2vXE6lXw.b['3'][1]++,null),timeout:args.timeout?(__cov_bjUWleXVsuRWnq2vXE6lXw.b['4'][0]++,args.timeout):(__cov_bjUWleXVsuRWnq2vXE6lXw.b['4'][1]++,30),_timeout:null,_timer:0};__cov_bjUWleXVsuRWnq2vXE6lXw.s['4']++;_this.startFetching();}__cov_bjUWleXVsuRWnq2vXE6lXw.s['5']++;Streamer.prototype.startFetching=function(){__cov_bjUWleXVsuRWnq2vXE6lXw.f['2']++;__cov_bjUWleXVsuRWnq2vXE6lXw.s['6']++;var _this=this;__cov_bjUWleXVsuRWnq2vXE6lXw.s['7']++;this.defaults._timer=this.defaults.timeout;__cov_bjUWleXVsuRWnq2vXE6lXw.s['8']++;Arbiter.publish('streamer/timer/update',{htmlObj:this.defaults.counter,timer:this.defaults._timer});__cov_bjUWleXVsuRWnq2vXE6lXw.s['9']++;this.defaults._timeout=window.setInterval(function(){__cov_bjUWleXVsuRWnq2vXE6lXw.f['3']++;__cov_bjUWleXVsuRWnq2vXE6lXw.s['10']++;_this.gogoTimer();},1000);};__cov_bjUWleXVsuRWnq2vXE6lXw.s['11']++;Streamer.prototype.gogoTimer=function(){__cov_bjUWleXVsuRWnq2vXE6lXw.f['4']++;__cov_bjUWleXVsuRWnq2vXE6lXw.s['12']++;var _this=this;__cov_bjUWleXVsuRWnq2vXE6lXw.s['13']++;if(this.defaults._timer>0){__cov_bjUWleXVsuRWnq2vXE6lXw.b['5'][0]++;__cov_bjUWleXVsuRWnq2vXE6lXw.s['14']++;this.defaults._timer--;__cov_bjUWleXVsuRWnq2vXE6lXw.s['15']++;Arbiter.publish('streamer/timer/update',{htmlObj:this.defaults.counter,timer:this.defaults._timer});}else{__cov_bjUWleXVsuRWnq2vXE6lXw.b['5'][1]++;__cov_bjUWleXVsuRWnq2vXE6lXw.s['16']++;window.clearInterval(_this.defaults._timeout);__cov_bjUWleXVsuRWnq2vXE6lXw.s['17']++;this.fetch();}};__cov_bjUWleXVsuRWnq2vXE6lXw.s['18']++;Streamer.prototype.fetch=function(){__cov_bjUWleXVsuRWnq2vXE6lXw.f['5']++;__cov_bjUWleXVsuRWnq2vXE6lXw.s['19']++;var _this=this;__cov_bjUWleXVsuRWnq2vXE6lXw.s['20']++;reqwest({url:_this.defaults.pollURL+'?timestamp='+_this.defaults.timestamp,type:'json',success:function(resp){__cov_bjUWleXVsuRWnq2vXE6lXw.f['6']++;__cov_bjUWleXVsuRWnq2vXE6lXw.s['21']++;if((__cov_bjUWleXVsuRWnq2vXE6lXw.b['7'][0]++,resp.response)&&(__cov_bjUWleXVsuRWnq2vXE6lXw.b['7'][1]++,resp.timestamp)){__cov_bjUWleXVsuRWnq2vXE6lXw.b['6'][0]++;__cov_bjUWleXVsuRWnq2vXE6lXw.s['22']++;if(resp.timestamp>_this.defaults.timestamp){__cov_bjUWleXVsuRWnq2vXE6lXw.b['8'][0]++;__cov_bjUWleXVsuRWnq2vXE6lXw.s['23']++;Arbiter.publish('streamer/fetchupdate',{htmlObj:_this.defaults.htmlObj,updateURL:resp.response});__cov_bjUWleXVsuRWnq2vXE6lXw.s['24']++;_this.defaults.timestamp=resp.timestamp;}else{__cov_bjUWleXVsuRWnq2vXE6lXw.b['8'][1]++;}}else{__cov_bjUWleXVsuRWnq2vXE6lXw.b['6'][1]++;}__cov_bjUWleXVsuRWnq2vXE6lXw.s['25']++;_this.startFetching();}});};
